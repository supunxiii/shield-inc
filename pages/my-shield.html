<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="icon" type="image/x-icon" href="/images/icons/icon-72x72.png" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link
      type="text/css"
      rel="stylesheet"
      href="/css/materialize.min.css"
      media="screen,projection"
    />
    <link type="text/css" rel="stylesheet" href="/css/my-shield.css" />
    <link rel="manifest" href="/manifest.json" />
    <!-- ios support -->
    <link rel="apple-touch-icon" href="/images/icons/icon-96x96.png" />
    <meta name="apple-mobile-web-app-status-bar" content="#0d47a1" />
    <meta name="theme-color" content="#0d47a1" />
    <title>My Shield - Suggestion Portal</title>
  </head>

  <body>
    <header>
      <nav class="nav-wrapper blue darken-4 inverted">
        <div class="nav-wrapper">
          <a href="/index.html" class="brand-logo" id="logo">THE SHIELD</a>
          <a href="" class="sidenav-trigger" data-target="mobile-menu">
            <i class="material-icons">menu</i>
          </a>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li id="nav-items">
              <a
                href="/index.html"
                class="tooltipped"
                data-position="bottom"
                data-tooltip="Back to Homepage"
                >Home</a
              >
            </li>
            <li id="nav-items" class="logged-in" style="display: none;">
              <a
                href="#"
                class="modal-trigger tooltipped"
                data-target="modal-account"
                data-position="bottom"
                data-tooltip="Click to view your registered E-mail"
                >Profile</a
              >
            </li>
            <li id="nav-items" class="logged-in" style="display: none;">
              <a
                href="#"
                class="tooltipped"
                data-position="bottom"
                data-tooltip="Time to bid adieu! Click to log out" id="logout-desktop" 
                >Log Out</a
              >
            </li>
            <li id="nav-items" class="logged-in" style="display: none;">
              <a
                href="#"
                class="modal-trigger tooltipped" 
                data-position="bottom"
                data-tooltip="Share your ideas with us! Click to suggest"
                data-target="modal-create"
                >Add Your Suggestions</a
              >
            </li>
            <li id="nav-items" class="logged-out" style="display: none;">
              <a
                href="#"
                class="modal-trigger tooltipped" 
                data-position="bottom"
                data-tooltip="Log in to add your suggestions"
                data-target="modal-login"
                >Log In</a
              >
            </li>
            <li id="nav-items" class="logged-out" style="display: none;">
              <a
                href="#"
                class="modal-trigger tooltipped" 
                data-position="bottom"
                data-tooltip="Register to our cyberspace! Just clicks away"
                data-target="modal-signup"
                >Subscribe</a
              >
            </li>
            <li
              id="theme-toggle"
              class="tooltipped"
              data-position="bottom"
              data-tooltip="Change Theme"
            >
              <i onclick="themeChange(this)" class="fa-regular fa-sun"></i>
            </li>
          </nav>
          </ul>
          <ul id="mobile-menu" class="sidenav grey lighten-2 inverted">
            <li id="nav-items"><a href="/index.html">Back to Home</a></li>
            <li id="nav-items" class="logged-in" style="display: none;"><a href="#" class="modal-trigger"
              data-target="modal-account">Profile</a></li>
            <li id="nav-items" class="logged-in" style="display: none;">
              <a
                href="#"
                class="" id="logout-mobile"
                >Log Out</a
              >
            </li>
            <li id="nav-items" class="logged-in" style="display: none;"><a href="#" class="modal-trigger" data-target="modal-create">Add Your Suggestions</a></li>
            <li id="nav-items" class="logged-out" style="display: none;"><a href="#" class="modal-trigger" data-target="modal-login">Log In</a></li>
            <li id="nav-items" class="logged-out" style="display: none;"><a href="#" class="modal-trigger" data-target="modal-signup">Subscribe</a></li>
            <div class="row">
              <div class="col s3">
                <a
                  class="waves-effect waves-light btn"
                  id="mobile-theme-button"
                >
                  <i onclick="themeChange(this)" class="fa-regular fa-sun"></i
                ></a>
              </div>
              <div class="col s3">
                <p id="theme-text-mobile">DAY/NIGHT</p>
              </div>
            </div>
          </ul>
        
    </header>
    <br>
    <br>
    
  <div id="modal-signup" class="modal">
    <div class="modal-content">
      <h4 style="text-align: center;">Subscribe to our <br />Cyberspace</h4><br />
      <form id="signup-form">
        <div class="input-field">
          <input type="email" id="signup-email" required />
          <label for="signup-email">Email Address</label>
        </div>
        <div class="input-field">
          <input type="password" id="signup-password" required />
          <label for="signup-password">Choose Password</label>
        </div>
        <div class="input-field">
          <input type="text" id="signup-number" required />
          <label for="signup-number">Account Number</label>
        </div>
        <button class="btn inverted" id="modal-btn-sign-up">Subscribe</button>
      </form>
    </div>
  </div>

  
  <div id="modal-login" class="modal">
    <div class="modal-content">
      <h4 style="text-align: center;">Log In</h4><br />
      <form id="login-form">
        <div class="input-field">
          <input type="email" id="login-email" required />
          <label for="login-email">Email Address</label>
        </div>
        <div class="input-field">
          <input type="password" id="login-password" required />
          <label for="login-password">Password</label>
        </div>
        <button class="btn inverted" id="modal-btn-login">Log In</button>
      </form>
      <br>
      <br>
      <div id="login-error" class="red-text"></div>
    </div>
  </div>

  
  <div id="modal-account" class="modal">
    <div class="modal-content center-align">
      <h4 style="text-align: center;">E-Profile Details</h4><br />
      <div class="account-details"></div>
    </div>
  </div>

  
  <div id="modal-create" class="modal">
    <div class="modal-content">
      <h4 style="text-align: center;">Add Suggestion(s)</h4><br />
      <form id="create-form">
        <div class="input-field">
          <input type="text" id="title" required>
          <label for="title">Suggestion Title</label>
        </div>
        <div class="input-field">
          <textarea id="content" class="materialize-textarea" required></textarea>
          <label for="content">Suggestion(s)</label>
        </div>
        <button class="btn inverted" id="modal-btn-add-new">Add Suggestion(s)</button>
      </form>
    </div>
  </div>

  <section class="logged-out non-reg-user inverted">
    <div class="center-align">
        <div class="row">
            <div >
                <div class="card green darken-1" id="card-section">
                    <div class="card-content white-text">
                        <span class="card-title inverted" id="entitle-txt">Suggestion Portal</span>
                        <span><i class="fa-regular fa-comments inverted" id="content-not"></i></span>
                        <p id="register-login-txt" class="inverted">Welcome to our suggestion page, where your feedback can help us improve our insurance services and better meet your needs. <br> Log in or subscribe to post your suggestion.</p>
                    </div>
                    <div class="card-action">
                        <a href="#" class="modal-trigger" data-target="modal-signup" id="sign-up-txt">Subscribe</a>
                        <a href="#" class="modal-trigger" data-target="modal-login" id="login-txt">Log In</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="container" style="margin-top: 40px; align-items: center;">
  <h5 style="text-align: center; font-style: italic;"><i class="fa-regular fa-comment-dots" id="comment-icon"></i> <br> Customer Suggestions <br class="logged-in"><br class="logged-in"><a href="#" class="logged-in modal-trigger inverted" data-target="modal-create" id="login-txt">Add Suggestion</a></h5><br class="logged-in">
  <ul class="collapsible z-depth-0 insurances" style="border: none;">
    
  </ul>
</div>
  <br>
  <br>
  <br>

  <footer class="inverted">
    <div class="footer-row-1">
      <div class="footer-col-1">
        <img
          src="/images/icons/icon-72x72.png"
          alt="logo"
          class="footer-logo"
        />
        <p>
          Shield Inc.&reg; takes great pride in upholding a strong commitment to its ownership structure and the rights of its stakeholders. As a responsible and ethical insurance company, we prioritize transparency and accountability in everything we do.
        </p>
      </div>
      <div class="footer-col-1">
        <h5>
          Office
          <div class="underline-1"><span></span></div>
        </h5>
        <br />
        <br />
        <p>616 Hauptstraße</p>
        <p>1776 Munich</p>
        <p>Bavaria, Germany</p>
        <p class="email-id">info.shield@gmail.com</p>
        <h6>+94702898499</h6>
      </div>
      <div class="footer-col-1">
        <h5>
          Links
          <div class="underline-1"><span></span></div>
        </h5>
        <br />
        <br />
        <ul>
          <li><a href="/index.html">Home</a></li>
          <li><a href="/pages/about-us.html">About Us</a></li>
          <li><a href="/pages/products-services.html">Products</a></li>
          <li><a href="/pages/contact.html">Contact Us</a></li>
          <li><a href="/pages/branch-network.html">Branches</a></li>
        </ul>
      </div>
      <div class="footer-col-1">
        <h5>
          Newsletter
          <div class="underline-1"><span></span></div>
        </h5>
        <br />
        <br />
        <form class="footer-form">
          <i class="fa-solid fa-envelope"></i>
          <input type="email-1" placeholder="Enter your email" required />
          <button type="submit">
            <i class="fa-solid fa-paper-plane"></i>
          </button>
        </form>
        <div class="social-icons">
          <h5>Connect with us</h5>
          <a
            href="https://instagram.com/supun.xiii?igshid=OGQ5ZDc2ODk2ZA=="
            target="_blank"
            class="tooltipped"
            data-position="top"
            data-tooltip="Instagram"
            ><i class="fa-brands fa-instagram"></i
          ></a>
          <a
            href="https://help.instagram.com/1747515265645443"
            target="_blank"
            class="tooltipped"
            data-position="bottom"
            data-tooltip="Threads"
            ><i class="fa-brands fa-threads"></i
          ></a>
          <a
            href="https://x.com"
            target="_blank"
            class="tooltipped"
            data-position="top"
            data-tooltip="X"
            ><i class="fa-brands fa-x-twitter"></i
          ></a>
          <a
            href="https://www.linkedin.com/in/supunwijesooriya"
            target="_blank"
            class="tooltipped"
            data-position="bottom"
            data-tooltip="LinkedIn"
            ><i class="fa-brands fa-linkedin-in"></i
          ></a>
          <a
            href="https://wa.me/94702898499?text=Hello%20Shield!%20I%20want%20to%20know%20{Your%20Message}"
            target="_blank"
            class="tooltipped"
            data-position="top"
            data-tooltip="WhatsApp"
            ><i class="fa-brands fa-whatsapp"></i
          ></a>
        </div>
      </div>
    </div>
    <br />
    <br />
    <div class="footer-copyright grey-darken-4">
      <div class="container center-align">
        Copyright &copy; 1776-2023, Supun Seth XIII and Shield Inc. All Rights
        Reserved. <br />
        <p>MDCCLXXVI</p>
      </div>
    </div>
  </footer>

  <a href="#" class="back-to-top inverted" id="myBtn" onclick="topFunction()">
    <span class="material-icons">keyboard_double_arrow_up</span>
  </a>
    <script src="/js/app.js"></script>
    <script src="/js/my-shield.js"></script>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
      import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js";
      import { getFirestore, collection, onSnapshot, addDoc, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore.js";
      // import { initializeApp } from "firebase/app";
      // import { getAuth } from "firebase/auth";
      // import { getFirestore } from "firebase/firestore";
      
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "your-unique-key",
        authDomain: "your-unique-app-name.firebaseapp.com",
        projectId: "your-unique-app-name",
        storageBucket: "your-unique-app-name.appspot.com",
        messagingSenderId: "666666666666",
        appId: "1:666666666666:web:6666666666666666666666"
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth();
      const db = getFirestore(app);
      const colRef = collection(db, 'insurance-types');
     
      // listen for auth status changes
      onAuthStateChanged(auth, user => {
          if (user) {
            onSnapshot(colRef, (snapshot) => {
            setupInsurances(snapshot.docs);
            setupUI(user);
            }, err => console.log(err.message));
          }
          else {
            setupUI();
            setupInsurances([]);
        }
    });

    const createForm = document.querySelector('#create-form');
    createForm.addEventListener('submit', (e) => {
      e.preventDefault();
      addDoc(colRef, {
      title: createForm.title.value,
      content: createForm.content.value
      }).then(() => {
      // close the create modal & reset form
      const modal = document.querySelector('#modal-create');
      M.Modal.getInstance(modal).close();
      createForm.reset();
    }).catch(err => {
        console.log(err.message);
    });
  });

      // signup
      const signupForm = document.querySelector("#signup-form");
      signupForm.addEventListener("submit", (e) => {
        e.preventDefault();

        // get user info
      const email = signupForm["signup-email"].value;
      const password = signupForm["signup-password"].value;
      // sign up the user
      createUserWithEmailAndPassword(auth, email, password).then((cred) => {
        const userId = cred.user.uid;
        const userRef = doc(collection(db, 'users'), userId);
        return setDoc(userRef, {
        account_number: signupForm['signup-number'].value
        });
      }).then(() => {
      // close the signup modal & reset form
      const modal = document.querySelector('#modal-signup');
      M.Modal.getInstance(modal).close();
      signupForm.reset();
      });
    });
       
    // logout
    const logoutDesktop = document.querySelector('#logout-desktop');
    const logoutMobile = document.querySelector('#logout-mobile');
    logoutDesktop.addEventListener('click', (e) => {
      e.preventDefault();
      signOut(auth);
    });

    logoutMobile.addEventListener('click', (e) => {
      e.preventDefault();
      signOut(auth);
    });


    const loginForm = document.querySelector('#login-form');
    const loginError = document.querySelector('#login-error'); 

    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
  
    // get user info
    const email = loginForm['login-email'].value;
    const password = loginForm['login-password'].value;

    // clear any previous error messages
    loginError.textContent = '';

    // log the user in
    signInWithEmailAndPassword(auth, email, password).then((cred) => {
      // close the login modal & reset form
      const modal = document.querySelector('#modal-login');
      M.Modal.getInstance(modal).close();
      loginForm.reset();
      })
      .catch((error) => {
        // handle login error and display the error message
        loginError.textContent = 'Email Address or Password is Invalid. Try Again or Contact Support.';
      });
    });
    </script>
    <script
      src="https://code.jquery.com/jquery-3.7.0.min.js"
      integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript" src="/js/materialize.min.js"></script>
    <script src="https://kit.fontawesome.com/959fd8dfca.js"></script>
    <script>
      $(document).ready(function () {
        $(".sidenav").sidenav();
        $(".tooltipped").tooltip({
          enterDelay: 300,
        });
        $('.collapsible').collapsible();
      });

      document
        .getElementById("theme-toggle")
        .addEventListener("click", function () {
          document.documentElement.classList.toggle("night-mode");

          document.querySelectorAll(".inverted").forEach((result) => {
            result.classList.toggle("invert");
          });
        });

      document
        .getElementById("mobile-theme-button")
        .addEventListener("click", function () {
          document.documentElement.classList.toggle("night-mode");

          document.querySelectorAll(".inverted").forEach((result) => {
            result.classList.toggle("invert");
          });
        });
    </script>
    <script>
      let mybutton = document.getElementById("myBtn");
      window.onscroll = function() {scrollFunction()};
      function scrollFunction() {
      if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        mybutton.style.display = "block";
      } else {
        mybutton.style.display = "none";
      }
      }
      function topFunction() {
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }
    </script>
  </body>
</html>
